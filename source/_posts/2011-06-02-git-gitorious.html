---
layout: post
title: "Git & Gitorious"
date: 2011-06-02T18:02:00-07:00
---

<div class='post'>
I'm trying to promote code sharing and code review and open source ideas, internally at my company. I setup a copy of gitorious on our intranet and we're starting to commit projects into it.
<p>

I whipped up a quick overview of Git and Gitorious to share with my coworkers to make them more comfortable with the systems and get them started. Its not entirely technically accurate but it reflects how I view the systems.
<p>




<style type="text/css"><!--
.wiki-content h1, .wiki-content h2 {
 border-bottom: 1px solid #919699;
 margin-top: 1em;
 margin-bottom: 1em;
}
.wiki-content p {
 margin-bottom: 1em;
}
--></style>



<div class="wiki-content">

<div>
<ul>
    <li><a href='#GitandGitorious-Gitorious'>Gitorious</a></li>
<ul>
    <li><a href='#GitandGitorious-GitoriousElements'>Gitorious Elements</a></li>
<ul>
    <li><a href='#GitandGitorious-Users'>Users</a></li>
    <li><a href='#GitandGitorious-Teams'>Teams</a></li>
    <li><a href='#GitandGitorious-Projects'>Projects</a></li>
    <li><a href='#GitandGitorious-Repositories'>Repositories</a></li>
</ul>
    <li><a href='#GitandGitorious-gettingstarted'>getting started</a></li>
    <li><a href='#GitandGitorious-WebAccesstoRepositories'>Web Access to Repositories</a></li>
    <li><a href='#GitandGitorious-AccessControl'>Access Control</a></li>
<ul>
    <li><a href='#GitandGitorious-Projects'>Projects</a></li>
    <li><a href='#GitandGitorious-Repositories'>Repositories</a></li>
</ul>
    <li><a href='#GitandGitorious-CodeReviewandForkbasedDevelopment'>Code Review and Fork-based Development</a></li>
<ul>
    <li><a href='#GitandGitorious-CloningRepos'>Cloning Repos</a></li>
    <li><a href='#GitandGitorious-MergeRequests'>Merge-Requests</a></li>
</ul>
</ul>
    <li><a href='#GitandGitorious-Git'>Git</a></li>
<ul>
    <li><a href='#GitandGitorious-DVCSvsVCS'>DVCS vs VCS</a></li>
<ul>
    <li><a href='#GitandGitorious-%22Traditional%22versioncontrol%2CorVCS'>"Traditional" version control, or VCS</a></li>
    <li><a href='#GitandGitorious-TheNewWay%2Corthe%22D%22inDVCS'>The New Way, or the "D" in DVCS</a></li>
</ul>
    <li><a href='#GitandGitorious-Everyonehasarepo'>Everyone has a repo</a></li>
    <li><a href='#GitandGitorious-Eachrepoisdifferent.'>Each repo is different.</a></li>
    <li><a href='#GitandGitorious-HashesasaGUID'>Hashes as a GUID</a></li>
    <li><a href='#GitandGitorious-DVCSCommandsandConcepts'>DVCS Commands and Concepts</a></li>
<ul>
    <li><a href='#GitandGitorious-TheOld'>The Old</a></li>
    <li><a href='#GitandGitorious-TheNew'>The New</a></li>
</ul>
    <li><a href='#GitandGitorious-ForSubversionUsers'>For Subversion Users</a></li>
    <li><a href='#GitandGitorious-AdvancedConcepts'>Advanced Concepts</a></li>
<ul>
    <li><a href='#GitandGitorious-TheIndex'>The Index</a></li>
    <li><a href='#GitandGitorious-layers'>layers</a></li>
<ul>
    <li><a href='#GitandGitorious-EfficientBlobStorage'>Efficient Blob Storage</a></li>
    <li><a href='#GitandGitorious-BlobDatabase'>Blob Database</a></li>
    <li><a href='#GitandGitorious-FileSystemTrees'>File System Trees</a></li>
    <li><a href='#GitandGitorious-HistoryGraph'>History Graph</a></li>
    <li><a href='#GitandGitorious-OtherVCSMetadata'>Other VCS Metadata</a></li>
</ul>
    <li><a href='#GitandGitorious-HistoryEditingandAmending'>History Editing and Amending</a></li>
</ul>
</ul>
</ul></div>

<h1><a name="GitandGitorious-Gitorious"></a>Gitorious</h1>



<p>Gitorious is web-based project and repository management software.  It just lets us create multiple repos and manage them into projects, teams and whatnot.</p>


<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'></td><td><b>Warning: All Code Public</b><br />All code uploaded to the site is visible to everyone within the corporate network. So scrub code for passwords and other credentials before uploading.</td></tr></table></div>


<h2><a name="GitandGitorious-GitoriousElements"></a>Gitorious Elements</h2>

<p>There are only 4 different major types of "things" in Gitorious.</p>

<ul>
 <li>Users</li>
 <li>Teams</li>
 <li>Projects</li>
 <li>Repositories</li>
</ul>


<h3><a name="GitandGitorious-Users"></a>Users</h3>

<p>You and me. Just create your account. Don't forget to add an ssh key after you login so you can upload code.</p>

<h3><a name="GitandGitorious-Teams"></a>Teams</h3>

<p>This is just a group of users. A user can be in many teams at once. These teams are just logical units to give access to whole projects and repositories at once. Without having specify individual members. Projects can also be 'owned' by a team instead of just a user.</p>

<h3><a name="GitandGitorious-Projects"></a>Projects</h3>

<p>Projects can be owned by teams or by users. Its just a place to group your repositories into. You may have a project for each repo. Or put a couple related repos in the same project.</p>

<p>Each project also gets its own mini wiki, which is not full features but convenient for small documentation, project and repo descriptions. And the project's mini-wiki is versioned using git.</p>

<p>When you create a repo, it has to be created in an existing project. Which is just good practice anyways. But when you clone a repo, it has no project associated with it (for convenience as well).</p>

<h3><a name="GitandGitorious-Repositories"></a>Repositories</h3>

<p>git repositories. This is the nitty gritty. Its where the source actually goes. There are some good-practices outlined further below on how to decide what goes in a repository.</p>

<p>gitorious provides several methods for access to the repository. The 2 methods we have enabled are <b>ssh</b> and <b>git-protocol</b>. The git protocol has no authentication mechanism so it provides read-only access to the repo. The ssh protocol uses a public key you upload to gitorious, to authenticate you and allow for read/write access to your repos (but only your repos).</p>


<h2><a name="GitandGitorious-gettingstarted"></a>getting started</h2>

<p>1. Create an account</p>

<p>The site isn't connected to LDAP so you'll have to create your account manually. No email verification is required though, you can log in immediately.</p>

<p>2. Join or create any useful teams.</p>

<p>This is optional. You don't need to be on a team in Gitorious to us the site to its fullest. But teams allow you to give write permission to your projects and repos to multiple people easily. It also acts as a useful form of organization.</p>

<p>3. Create projects and repos</p>

<p>Generally you'll create a repo for each app you want to share the source for. And you may create a project for it as well. But you may create multiple repos in the same project if or put multiple applications/source trees in the same repo. Its your personal preference.</p>

<p>4. Share your code.</p>

<p>You can upload your code to your repositories. Remember to clone the gitorious repo first using the ssh url, and to upload an ssh public key so you can get write access to your repo.</p>

<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'></td><td><b>Create Away</b><br />All objects and metadata can be easily remove or replaces so feel free to create them with recless abandon.<br/>
We can always split projects and repos later, or move other things around.</td></tr></table></div>

<h2><a name="GitandGitorious-WebAccesstoRepositories"></a>Web Access to Repositories</h2>

<p>As any decent source repository management site, gitorious provides a simple web-based repository browser, so that you can browse the repository without having to clone it first. You can also browse the history of the repo.</p>

<h2><a name="GitandGitorious-AccessControl"></a>Access Control</h2>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'></td><td><b>Warning: All Code Public</b><br />All code uploaded to the site is visible to everyone within the corporate network. So scrub code for passwords and other credentials before uploading.</td></tr></table></div>

<h3><a name="GitandGitorious-Projects"></a>Projects</h3>

<p>You can set who can edit and write to projects. You can add teams or individuals to a project.</p>

<h3><a name="GitandGitorious-Repositories"></a>Repositories</h3>

<p>You can assign teams and individuals in 3 different capacities when it comes to repositories.</p>
<ul>
 <li>Commiters</li>
 <li>Reviewers</li>
 <li>Administrators</li>
</ul>


<p>Users and teams can be assigned any combination of these 3 roles for a repository. Commiters can update changes to the git repository. Reviewers can manipulate merge-requests. And administrators can edit the repo metadata in gitorious.</p>

<h2><a name="GitandGitorious-CodeReviewandForkbasedDevelopment"></a>Code Review and Fork-based Development</h2>

<h3><a name="GitandGitorious-CloningRepos"></a>Cloning Repos</h3>

<p>Just as you can use the 2 methods described further above to download/clone git repos to your local machine. You can also request that gitorious clone the repo for you in gitorious. Doing this, it can track metadata about the repo relationships and enable some more advanced features, such as watching repos and performing merge-requests.</p>

<h3><a name="GitandGitorious-MergeRequests"></a>Merge-Requests</h3>

<p>This is an advanced feature, but it bares mentioning. If you have a repo in gitorious cloned from another repo also in gitorious, and you'd like to submit your changes to be pushed up the line back to the origin of the source. You can submit a merge requests, and the original authors can work with you in a simple form of code-review.</p>


<h1><a name="GitandGitorious-Git"></a>Git</h1>


<p>This isn't a tutorial on using Git. Its just a overview of the DVCS, the concepts there-in, and how DVCS differ from traditional VCS. You can find a great deal of presentations, tutorials, and documentation online for git which will better serve your needs if your trying to get started using it.</p>

<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'></td><td><b>Git Parlance</b><br />git documentation and proponents use alot of lexicon that they pretend describe new concepts in version control. When in actually they are just refering to concepts that have existed in VCS for decades but are simply for flexible now with the advent of DVCS. I'll try to point out when I'm using this vocabulary.</td></tr></table></div>

<h2><a name="GitandGitorious-DVCSvsVCS"></a>DVCS vs VCS</h2>

<h3><a name="GitandGitorious-%22Traditional%22versioncontrol%2CorVCS"></a>"Traditional" version control, or VCS</h3>

<p>ala subversion or CVS.</p>

<ul>
 <li>centralized authoritative location for the source code. defined by both owners, and the software.</li>
 <li>client and server are seperate entities.</li>
</ul>


<h3><a name="GitandGitorious-TheNewWay%2Corthe%22D%22inDVCS"></a>The New Way, or the "D" in DVCS</h3>

<p>ala git or mercurial</p>

<p>The "D" refers to "decentralized" version control.</p>

<ul>
 <li>no central authoritative location. defined by the software.</li>
 <li>the authoritative location for the source defined only by convention.</li>
 <li>no difference between client and server. we'll just call it a "client" here though.</li>
</ul>


<p>This means that the software and internals of the VCS are designed so there is no enforcement about who controls the source.<br/>
Everyone working on the source is equal (in the eyes of the VCS). This includes the location that the team defines as the authoritative (canon) location for the source code.</p>

<p>Its still common to have a central repository even in DVCS. Where the team members submit their final code changes to. But the benefits come in having the VCS designed around not mandating a central location.</p>

<h2><a name="GitandGitorious-Everyonehasarepo"></a>Everyone has a repo</h2>

<p>In traditional VCS the user usually gets just the minimal amount of data required to work on the code at the moment.</p>

<p>When they pull a "working copy" of the source tree, they get just the branch they need. And they get just the subtree that they need of that branch. They usually don't get any history in their "working copy", just the immediately files and HEAD version. All of the other details are easily accessible from the central server if needed for a complex operation.</p>

<p>In git, the "repository" and the "working directory" are one in the same. When you get a working copy from some other repo. Your just copying the entire repository to a new local one. And that repository becomes your working copy. The files are ready to be worked with. All the history and other VCS details are hidden in a .git subdirectory.</p>

<p>This may seem a rather heavy-weight operation, but at the same time, in git, you tend to create smaller repositories. Unlike traditional VCS where you put all your projects and applications in the same repo. In git you'll create a separate repo for each project or application. So the size remains manageable. Furthermore, in git, while you can't clone just a subtree of a repo, you can clone only a single branch or subset of the repos branches. In fact its quite common just to clone the single branch your interested in... say the "master" branch (same thing as "trunk" in svn or cvs).</p>


<p>If your working on the code in several locations, each location will actually be a separate repo. Possibly with a different set of branches in it.</p>

<p>This is another important concept in git. Even though we all have a repo for the project, the repos are not identical. And they don't need to be.</p>

<h2><a name="GitandGitorious-Eachrepoisdifferent."></a>Each repo is different.</h2>

<p>This is not just because we have our own private changes in our repo, that we haven't yet shared with others. But each repo also <ins>knows</ins> its a different one from all the others. This is how we keep from stepping on each others toes when we are all working on similar branches/code. git knows that Marks "master" branch is actually a different branch than Sue's "master" branch. And you have to address them as such if you really want to work with both in the same operation.</p>

<h2><a name="GitandGitorious-HashesasaGUID"></a>Hashes as a GUID</h2>

<p>To deal with the issues of multiple repos, git tracks everything in the repo using secure message digests (hashes) of their content. This acts as a good GUID for these objects so that no matter where they came from or when, if they're identical, then it can identify them as such. This also makes comparing objects faster. The system uses this for files, directories, and history as well.</p>

<p>Unfortunately there are a few gotchas to keep in mind with this. For instance the same source tree can results from 2 different histories. So that can cause some complications, when deciding who's history is more useful to keep around. But most users don't have to worry about that at the beginning.</p>

<h2><a name="GitandGitorious-DVCSCommandsandConcepts"></a>DVCS Commands and Concepts</h2>

<h3><a name="GitandGitorious-TheOld"></a>The Old</h3>

<p>Generally DVCS work the same as VCS and you'll see similar commands and concepts.</p>

<ul>
 <li>branch</li>
 <li>commit</li>
 <li>log/history</li>
 <li>diff</li>
 <li>tag</li>
</ul>


<h3><a name="GitandGitorious-TheNew"></a>The New</h3>

<p>Where DVCS is different tends to be in what it adds on top of the existing VCS. Here are some commands you'll find new.</p>

<ul>
 <li>push</li>
 <li>pull</li>
 <li>clone</li>
 <li>amend</li>
</ul>


<p>But not entirely new. push, pull, and clone are similar to checkout and commit, but between repositories, since there is no separate working copy. And amend is an advance concept you may never use.</p>

<h2><a name="GitandGitorious-ForSubversionUsers"></a>For Subversion Users</h2>

<p>I found this mapping between svn and git commands helpful, when I first switched to using git for some projects.</p>

<p> <span class="nobr"><a href="http://git.or.cz/course/svn.html" class="external-link" rel="nofollow">http://git.or.cz/course/svn.html<sup></sup></a></span></p>

<p>git can also work with svn repos directly. you usually do this by replicating the svn repo into a git repo.<br/>
then working with the git repo. But you can do bi-directional replication between the two, and continue to use<br/>
both repos for future versioning, side-by-side.</p>

<p> <span class="nobr"><a href="http://www.kernel.org/pub/software/scm/git/docs/git-svn.html" class="external-link" rel="nofollow">http://www.kernel.org/pub/software/scm/git/docs/git-svn.html<sup></sup></a></span></p>

<p>It can be a little complicated to use and there are better example workflows of it online as well.</p>

<h2><a name="GitandGitorious-AdvancedConcepts"></a>Advanced Concepts</h2>

<p>Some advanced concepts you don't need to understand to use git. but that might be interesting if your going to delve further into git.</p>

<h3><a name="GitandGitorious-TheIndex"></a>The Index</h3>

<p>git commands can work on a staging area for the changeset before its commited to the repository. This staging area is called the <b>index</b>. You can flag files/directories for commital, as your working on the source. And when you do, it will actually copy the state (content) of those files and directories, at that time, into the staging area. Then, later, when you commit, that staging area is what is commited to the repository. not the actual current state of the source tree. This allows or a specifically control partial-source commit.</p>

<p>This can be useful or annoying. I find it the latter, and as such I completely ignore this feature. Instead I use git commands that ignore the staging area and commit the current state of the source tree all or none. automatically commiting changes to any files that were previously commited to the repo, and in some cases even commiting new files to the repo automatically.</p>

<p>But using the commands that work with the index can provide for some more advanced usage of git. Such as performing more fine-grained commit history, or quickly switching to temporary branches for quick fixes, and then switching back to your main work.</p>

<h3><a name="GitandGitorious-layers"></a>layers</h3>

<p>The architecture of git is rather simple and it benefits to understand this when you start using git more heavily. Its effectively composed of a series of layers.</p>

<ol>
 <li>Efficient Blob Storage</li>
 <li>Blob Database</li>
 <li>Filesystem Trees</li>
 <li>Version History Graphs</li>
 <li>Other VCS Metadata: branches, tags, head...</li>
</ol>


<p>I won't go into the details of whats stored in the blobs, and the filesystem/version graphs, as there are good presentations online that describe these more effectively.</p>

<h4><a name="GitandGitorious-EfficientBlobStorage"></a>Efficient Blob Storage</h4>

<p>In relational databases, a Binary Large Object (BLOB) is a chunk of arbitrary binary data of arbitrary size.</p>

<p>Git starts with a system that efficiently stores blobs by diffing related/similar blobs, and then compressing them. But the details of this are always hidden to the user as its not necessary to understand them. And every VCS implements such a system anyways.</p>

<h4><a name="GitandGitorious-BlobDatabase"></a>Blob Database</h4>

<p>git then takes these blobs and puts them into a simple relational database of only one table. which contains the blob column and a few columns of metadata.</p>

<p>git uses a hash of the blob as the primary key and provides commands to manipulate the rows of this database directly from the command line. Most users never have to do this but sometimes it can become necessary if the repo becomes corrupt, data is deleted by accident, or someone messes up some advanced command.</p>

<h4><a name="GitandGitorious-FileSystemTrees"></a>File System Trees</h4>

<p>Two types of data git will store in these blobs are files and directories.</p>

<p>How files are stored is obvious; it stores the content in the blob. By hashing the files, you get immediate duplicate reduction.</p>

<p>But to store directories it builds a tree of blobs, one for each directory. The blob contains the list of files and directories in the directory, and their hashes. This makes for a rather efficient storage of directories in the table, as subtrees that don't change, never need to be modified or replicated in the database. Furthermore identical subtrees can automatically detected in this manner.</p>

<h4><a name="GitandGitorious-HistoryGraph"></a>History Graph</h4>

<p>Similar to the directories stored in blobs, the system stores in blobs the Directed Acyclic Graphs that comprise history trails for source versions. And by hashing the elements of the history, you get similar benefits to the filesystem storage.</p>

<h4><a name="GitandGitorious-OtherVCSMetadata"></a>Other VCS Metadata</h4>

<p>Finally, on top of all of this, git adds the other CVS metadata required, such as branches and tags, and which version is the HEAD. All in order to round git up into a fully featured modern version control system.</p>

<h3><a name="GitandGitorious-HistoryEditingandAmending"></a>History Editing and Amending</h3>

<p>Since a git repo is really just a kind object or blob relational database, git commands expose that database directly for you to play with. And in fact make it easy to play with the objects and graphs stored in that database. One thing that git allows you to do easily is to modify commits that are already in the database, and to change the history graphs that lead to a particular version of the source tree.</p>

<p>These features are usually avoided because if your not careful you can permanently delete data that's in the repository, or worse, surprise someone else who has already cloned the data that your changing.</p>


</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Jason Stillwell</div>
<div class='content'>
Thanks, I&#39;m usually watchful of that, but I wrote this document quickly.</div>
</div>
<div class='comment'>
<div class='author'>AHAntics</div>
<div class='content'>
I&#39;d (almost) do a search and replace s/your/you&#39;re/gi <br /><br />You&#39;re is a contraction of &quot;you are&quot; - you&#39;re making a grammatical error and sending it to the team. <br />Your is a possessive pronoun - that repository is yours, not mine.</div>
</div>
<div class='comment'>
<div class='author'>Jason Stillwell</div>
<div class='content'>
Feedback is, of course, welcome.</div>
</div>
</div>
